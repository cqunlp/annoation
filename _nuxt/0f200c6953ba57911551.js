(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{694:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(t){return(299*parseInt(t.substr(1,2),16)+587*parseInt(t.substr(3,2),16)+114*parseInt(t.substr(5,2),16))/1e3<128?"#ffffff":"#000000"}},695:function(t,e,n){var o=n(28);o(o.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},696:function(t,e,n){var content=n(719);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(13).default)("a2fb5e3a",content,!0,{sourceMap:!1})},697:function(t,e,n){var content=n(721);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(13).default)("3f492b19",content,!0,{sourceMap:!1})},718:function(t,e,n){"use strict";var o=n(696);n.n(o).a},719:function(t,e,n){(e=n(12)(!1)).push([t.i,'.highlight.blue[data-v-aba2294a]{background:#edf4fa!important}.highlight.bottom[data-v-aba2294a]{display:block;white-space:normal}.highlight[data-v-aba2294a]:first-child{margin-left:0}.highlight[data-v-aba2294a]{border:2px solid;margin:4px 6px 4px 3px;vertical-align:middle;box-shadow:2px 4px 20px rgba(0,0,0,.1);position:relative;cursor:default;min-width:26px;line-height:22px;display:flex}.highlight .delete[data-v-aba2294a]{top:-15px;left:-13px;position:absolute;display:none}.highlight:hover .delete[data-v-aba2294a]{display:block}.highlight__content[data-v-aba2294a]{display:flex;flex-wrap:wrap;align-items:center;padding:2px 2px 0 6px}.highlight.bottom .highlight__content[data-v-aba2294a]:after{content:" ";padding-right:3px}.highlight__label[data-v-aba2294a]{line-height:14px;align-items:center;justify-content:center;display:flex;padding:0 8px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff}.highlight__label[data-v-aba2294a]:after{content:attr(data-label);display:block;font-size:14px;-webkit-font-smoothing:subpixel-antialiased;letter-spacing:.1em}',""]),t.exports=e},720:function(t,e,n){"use strict";var o=n(697);n.n(o).a},721:function(t,e,n){(e=n(12)(!1)).push([t.i,".highlight-container.highlight-container--bottom-labels[data-v-2e88b2f6]{align-items:flex-start}.highlight-container[data-v-2e88b2f6]{line-height:42px!important;display:flex;flex-wrap:wrap;white-space:pre-wrap;cursor:default}.highlight-container.highlight-container--bottom-labels .highlight.bottom[data-v-2e88b2f6]{margin-top:6px}",""]),t.exports=e},728:function(t,e,n){"use strict";n(5),n(48),n(6),n(35),n(43),n(30),n(22),n(23),n(3);var o=n(42),r=n(694),l={props:{content:{type:String,default:"",required:!0},label:{type:String,default:""},color:{type:String,default:"#64FFDA"},labels:{type:Array,default:function(){return[]},required:!0}},data:function(){return{showMenu:!1}},computed:{textColor:function(){return Object(r.a)(this.color)}},methods:{update:function(label){this.$emit("update",label),this.showMenu=!1},remove:function(){this.$emit("remove")}}},c=(n(718),n(14)),f=n(16),d=n.n(f),h=n(144),m=n(180),v=n(119),x=n(179),y=n(26),_=n(183),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.label?n("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("span",t._g({staticClass:"highlight bottom",style:{borderColor:t.color}},o),[n("span",{staticClass:"highlight__content"},[t._v(t._s(t.content)),n("v-icon",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.remove(e)}}},[t._v("mdi-close-circle")])],1),n("span",{staticClass:"highlight__label",style:{backgroundColor:t.color,color:t.textColor},attrs:{"data-label":t.label}})])]}}],null,!1,3841481336),model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[t._v(" "),n("v-list",{staticClass:"overflow-y-auto",attrs:{dense:"","min-width":"150","max-height":"400"}},t._l(t.labels,(function(e,i){return n("v-list-item",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:[e.suffix_key],expression:"[item.suffix_key]",modifiers:{once:!0}}],key:i,on:{shortkey:function(n){return t.update(e)},click:function(n){return t.update(e)}}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1),t._v(" "),n("v-list-item-action",[n("v-list-item-action-text",{domProps:{textContent:t._s(e.suffix_key)}})],1)],1)})),1)],1):n("span",[t._v(t._s(t.content))])}),[],!1,null,"aba2294a",null),w=component.exports;function k(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t))){var i=0,e=function(){};return{s:e,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,r=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}d()(component,{VIcon:h.a,VList:m.a,VListItem:v.a,VListItemAction:x.a,VListItemActionText:y.a,VListItemContent:y.b,VListItemTitle:y.c,VMenu:_.a});var E={components:{EntityItem:w},props:{text:{type:String,default:"",required:!0},labels:{type:Array,default:function(){return[]},required:!0},entities:{type:Array,default:function(){return[]},required:!0},deleteAnnotation:{type:Function,default:function(){return[]},required:!0},updateEntity:{type:Function,default:function(){return[]},required:!0},addEntity:{type:Function,default:function(){return[]},required:!0}},data:function(){return{showMenu:!1,x:0,y:0,start:0,end:0}},computed:{sortedEntities:function(){return this.entities.slice().sort((function(a,b){return a.start_offset-b.start_offset}))},chunks:function(){var t,e=[],n=0,o=k(this.sortedEntities);try{for(o.s();!(t=o.n()).done;){var r=t.value;e.push({label:null,color:null,text:this.text.slice(n,r.start_offset)}),n=r.end_offset;var label=this.labelObject[r.label];e.push({id:r.id,label:label.text,color:label.background_color,text:this.text.slice(r.start_offset,r.end_offset)})}}catch(t){o.e(t)}finally{o.f()}return e.push({label:null,color:null,text:this.text.slice(n,this.text.length)}),e},labelObject:function(){var t,e={},n=k(this.labels);try{for(n.s();!(t=n.n()).done;){var label=t.value;e[label.id]=label}}catch(t){n.e(t)}finally{n.f()}return e}},methods:{show:function(t){var e=this;t.preventDefault(),this.showMenu=!1,this.x=t.clientX||t.changedTouches[0].clientX,this.y=t.clientY||t.changedTouches[0].clientY,this.$nextTick((function(){e.showMenu=!0}))},setSpanInfo:function(){var t;if(window.getSelection?t=window.getSelection():document.selection&&(t=document.selection),!(t.rangeCount<=0)){var e=t.getRangeAt(0),n=e.cloneRange();n.selectNodeContents(this.$el),n.setEnd(e.startContainer,e.startOffset),this.start=Object(o.a)(n.toString()).length,this.end=this.start+Object(o.a)(e.toString()).length}},validateSpan:function(){if(void 0===this.start||void 0===this.end)return!1;if(this.start===this.end)return!1;var t,e=k(this.entities);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.start_offset<=this.start&&this.start<n.end_offset)return!1;if(n.start_offset<this.end&&this.end<=n.end_offset)return!1;if(this.start<n.start_offset&&n.end_offset<this.end)return!1}}catch(t){e.e(t)}finally{e.f()}return!0},open:function(t){this.setSpanInfo(),this.validateSpan()&&this.show(t)},assignLabel:function(t){this.validateSpan()&&(this.addEntity(this.start,this.end,t),this.showMenu=!1,this.start=0,this.end=0)}}},I=(n(720),Object(c.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"highlight-container highlight-container--bottom-labels",on:{click:t.open,touchend:t.open}},[t._l(t.chunks,(function(e,i){return n("entity-item",{key:i,attrs:{content:e.text,label:e.label,color:e.color,labels:t.labels},on:{remove:function(n){return t.deleteAnnotation(e.id)},update:function(n){return t.updateEntity(n.id,e.id)}}})})),t._v(" "),n("v-menu",{attrs:{"position-x":t.x,"position-y":t.y,absolute:"","offset-y":""},model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[n("v-list",{staticClass:"overflow-y-auto",attrs:{dense:"","min-width":"150","max-height":"400"}},t._l(t.labels,(function(label,i){return n("v-list-item",{directives:[{name:"shortkey",rawName:"v-shortkey",value:[label.suffix_key],expression:"[label.suffix_key]"}],key:i,on:{shortkey:function(e){return t.assignLabel(label.id)},click:function(e){return t.assignLabel(label.id)}}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(label.text)}})],1),t._v(" "),n("v-list-item-action",[n("v-list-item-action-text",{domProps:{textContent:t._s(label.suffix_key)}})],1)],1)})),1)],1)],2)}),[],!1,null,"2e88b2f6",null));e.a=I.exports;d()(I,{VList:m.a,VListItem:v.a,VListItemAction:x.a,VListItemActionText:y.a,VListItemContent:y.b,VListItemTitle:y.c,VMenu:_.a})},925:function(t,e,n){"use strict";n.r(e);n(17),n(695),n(79);var o=n(194),r={layout:"demo",components:{EntityItemBox:n(728).a,MetadataBox:o.a},data:function(){return{items:[{id:4,text:"LOC",prefix_key:null,suffix_key:"l",background_color:"#7c20e0",text_color:"#ffffff"},{id:5,text:"MISC",prefix_key:null,suffix_key:"m",background_color:"#fbb028",text_color:"#000000"},{id:6,text:"ORG",prefix_key:null,suffix_key:"o",background_color:"#e6d176",text_color:"#000000"},{id:7,text:"PER",prefix_key:null,suffix_key:"p",background_color:"#6a74b9",text_color:"#ffffff"}],currentDoc:{id:8,text:"After bowling Somerset out for 83 on the opening morning at Grace Road , Leicestershire extended their first innings by 94 runs before being bowled out for 296 with England discard Andy Caddick taking three for 83 .",annotations:[{id:17,prob:0,label:4,start_offset:60,end_offset:70,user:1,document:8},{id:19,prob:0,label:4,start_offset:165,end_offset:172,user:1,document:8},{id:16,prob:0,label:6,start_offset:14,end_offset:22,user:1,document:8},{id:18,prob:0,label:6,start_offset:73,end_offset:87,user:1,document:8},{id:20,prob:0,label:7,start_offset:181,end_offset:193,user:1,document:8}],meta:'{"wikiPageId":2}',annotation_approver:null}}},methods:{removeEntity:function(t){this.currentDoc.annotations=this.currentDoc.annotations.filter((function(e){return e.id!==t}))},updateEntity:function(t,e){var n=this.currentDoc.annotations.findIndex((function(t){return t.id===e}));this.currentDoc.annotations[n].label=t},addEntity:function(t,e,n){var o={id:Math.floor(Math.random()*Math.floor(Number.MAX_SAFE_INTEGER)),start_offset:t,end_offset:e,label:n};this.currentDoc.annotations.push(o)}}},l=n(14),c=n(16),f=n.n(c),d=n(178),h=n(106),m=n(684),v=n(675),x=n(685),y=n(686),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-content",[n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",md:"9"}},[n("v-card",[n("v-card-text",{staticClass:"title"},[n("entity-item-box",{attrs:{labels:t.items,text:t.currentDoc.text,entities:t.currentDoc.annotations,"delete-annotation":t.removeEntity,"update-entity":t.updateEntity,"add-entity":t.addEntity}})],1)],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12",md:"3"}},[n("metadata-box",{attrs:{metadata:JSON.parse(t.currentDoc.meta)}})],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;f()(component,{VCard:d.a,VCardText:h.b,VCol:m.a,VContainer:v.a,VContent:x.a,VRow:y.a})}}]);